\section{Desarollo}

\noindent Para el desarrollo de este laboratorio lo primero que se realiza es una estructura la cual almacene de manera eficiente para un posterior trabajo la instrucción a leer. Para esto se crea la estructura \textit{Move} la cual posee 4 punteros de tipo char, los cuales almacenarán específicamente la instrucción, 2 registros, y un valor numérico (el cual solo se emplea para los registros \textit{addi} y \textit{subi}).

\begin{figure}[H]
	\centering
	\includegraphics[scale=1]{images/estructura.png}
	\caption{Archivo de salida del camino de datos.}
	\label{fig:estructura}
\end{figure}

\noindent Posterior a esto se realiza la lectura de cada línea del archivo de entrada, donde se revisa la primera palabra de la línea; si esta es una instrucción, dependiendo de su tipo, se realiza una lectura de los registro y datos asociados a este, para así asociarlo a una estructura la cual será almacenada posterior a este proceso en un arreglo que contendrá todas las estructuras.

\noindent Una vez que todas las instrucciones se encuentren almacenadas de manera correcta en el arreglo de estructuras, se prosigue con la evaluación de cada una de estas y su respectiva función y a la declaración de un tablero, el cual consiste en un arreglo de caracteres con un largo de 9, el cual representará el tablero matricial.

\noindent En primera instancia se revisan las primeras dos instrucciones y las define como los jugadores (jugador X y jugador O), ambas entregadas por una instrucción de tipo \textit{addi}. En la siguiente línea se verifica que se pida el almacenamiento para las jugadas a insertar. Posterior a estas 3 revisiones principales, se recorre el arreglo leyendo el tipo de instrucción que posee cada una de las instrucciones y según ésta, define qué acción realizará. Antes de realizar la acción, se le realiza la consulta al tablero si la jugada, ya sea insertar o eliminar un símbolo, exista y que a la vez, esta sea propia del jugador que quiere realizar la acción.En el caso que se realice una jugada no válida, tal como la inserción en alguna casilla no existente o la sobrescritura respecto una jugada del otro jugador, el programa entrega un mensaje que la partida está incompleta y procede al cierre de este.

 \noindent Al final de la lectura de todas las instrucciones del arreglo, se realiza una comprobación respecto a si hay un ganador (indicando el nombre de este en caso de existir) o si se genera un empate. Para realizar el cálculo de cuántas veces pasa cada instrucción por cada etapa en el camino de datos, se realizan sumas de valor 1 por cada etapa que realiza de manera constante cada instrucción, es decir, se asume que si es una instrucción de tipo \textit{addi} o \textit{subi}, estas pasarán por las 5 etapas del camino de datos, en cambio, una instrucción de tipo \textit{sw} solamente utiliza 4 etapas del camino de datos (se excluye Mem). A modo de finalización, el programa entrega dos documentos, uno llamado \textit{resultado.txt}, el cual posee la respuesta del ganador de la partida en caso de existir y el tablero con las jugadas realizadas, y un documento llamado \textit{Etapas.txt}, el cual entrega la cantidad de veces que cada instrucción pasa por cada etapa del camino de datos del procesador monociclo.
